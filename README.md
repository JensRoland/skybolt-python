# Skybolt Python

High-performance asset caching for multi-page applications.

## Installation

```bash
pip install skybolt-python
```

Or with uv:

```bash
uv add skybolt-python
```

## Usage

```python
from skybolt import Skybolt

# Initialize with render map path and cookies
sb = Skybolt("dist/.skybolt/render-map.json", cookies=request.cookies)

# In your template:
# Critical CSS (in <head>)
sb.css("src/css/critical.css")

# Launch script (in <head>, after critical CSS)
sb.launch_script()

# Main CSS
sb.css("src/css/main.css")

# JavaScript (before </body>)
sb.script("src/js/app.js")
```

## Django Integration

```python
# views.py
from skybolt import Skybolt

def index(request):
    sb = Skybolt("static/.skybolt/render-map.json", cookies=request.COOKIES)
    return render(request, "index.html", {"sb": sb})
```

```html
<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    {{ sb.css("src/css/critical.css")|safe }}
    {{ sb.launch_script()|safe }}
    {{ sb.css("src/css/app.css")|safe }}
</head>
<body>
    <!-- content -->
    {{ sb.script("src/js/app.js")|safe }}
</body>
</html>
```

## Flask Integration

```python
from flask import Flask, render_template, request
from skybolt import Skybolt

app = Flask(__name__)

@app.route("/")
def index():
    sb = Skybolt("static/.skybolt/render-map.json", cookies=request.cookies)
    return render_template("index.html", sb=sb)
```

## API Reference

### `Skybolt(render_map_path, cookies=None, cdn_url=None)`

Create a new Skybolt instance.

- `render_map_path`: Path to render-map.json generated by Vite plugin
- `cookies`: Cookie dictionary (optional)
- `cdn_url`: Optional CDN URL prefix

### `css(entry: str) -> str`

Render CSS asset. Returns HTML string.

### `script(entry: str, module: bool = True) -> str`

Render JavaScript asset. Returns HTML string.

### `launch_script() -> str`

Render the Skybolt client launcher script. Call once in `<head>`.

### `preload(entry, as_type, mime_type=None, crossorigin=None, fetchpriority=None) -> str`

Render preload link for critical resources.

### `get_asset_url(entry: str) -> str | None`

Get URL for an asset (for manual use cases).

### `get_asset_hash(entry: str) -> str | None`

Get hash for an asset (for manual use cases).

## License

MIT
